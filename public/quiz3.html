<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Mini PDF Quiz</title>

<style>
  body {
    font-family: system-ui, -apple-system, sans-serif;
    margin: 0;
    background: #f4f6f8;
  }

  .container {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    height: 100vh;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #fff;
  }

  .answers {
    overflow-y: auto;
    padding: 20px;
    background: #ffffff;
    border-left: 1px solid #ddd;
  }

  h2 {
    margin-top: 0;
  }

  .question {
    margin-bottom: 20px;
  }

  .question-title {
    font-weight: 600;
    margin-bottom: 6px;
  }

  label {
    display: block;
    margin: 4px 0;
    cursor: pointer;
  }

  button {
    padding: 10px 16px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 20px;
  }

  .score {
    margin-top: 16px;
    font-size: 18px;
    font-weight: bold;
  }
  .correct {
  background: #e6f7e6;
  border-left: 4px solid #2ecc71;
  padding-left: 6px;
}

.incorrect {
  background: #fdecea;
  border-left: 4px solid #e74c3c;
  padding-left: 6px;
}

.disabled input {
  pointer-events: none;
}

</style>
</head>

<body>

<div class="container">

  <!-- PDF VIEW -->
  <iframe src="set2.pdf"></iframe>

  <!-- ANSWER SHEET -->
  <div class="answers">
    <h2>Answer Sheet</h2>
    <div id="quiz"></div>
    <button onclick="checkScore()">Check My Score</button>
    <div id="score" class="score"></div>
  </div>

</div>

<script>
/* ==========================
   QUIZ DATA (JSON)
   ========================== */

const quizData = [
  {
    "part": "Part 1",
    "questions": [
      {
        "id": 1,
        "type": "single",
        "correct": ["C"],
        "choices": {
          "A": "One individual at a time viewed a film.",
          "B": "Customers could view one film after another.",
          "C": "Prizefights were the most popular subjects for films.",
          "D": "Each film was short."
        }
      },
      {
        "id": 2,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "Explain Edison’s financial success",
          "B": "Describe the model used to design Kinetoscope parlors",
          "C": "Contrast their popularity with Kinetoscope parlors",
          "D": "Illustrate technological superiority"
        }
      },
      {
        "id": 3,
        "type": "single",
        "correct": ["C"],
        "choices": {
          "A": "Edison preferred developing many machines",
          "B": "Edison doubted exhibitors would upgrade projectors",
          "C": "Projection technology limited the number of machines he could sell",
          "D": "Edison required exhibitors to buy multiple projectors"
        }
      },
      {
        "id": 4,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "Frequently",
          "B": "Easily",
          "C": "Intelligently",
          "D": "Obviously"
        }
      },
      {
        "id": 5,
        "type": "single",
        "correct": ["D"],
        "choices": {
          "A": "They were more expensive",
          "B": "They attracted larger audiences",
          "C": "They were more educational",
          "D": "They did not require live performers"
        }
      },
      {
        "id": 6,
        "type": "single",
        "correct": ["A"],
        "choices": {
          "A": "They decided how to combine program elements",
          "B": "They advised filmmakers",
          "C": "They performed live acts",
          "D": "They produced the films"
        }
      },
      {
        "id": 7,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "The advent of projection",
          "B": "The viewer’s relationship with the image",
          "C": "A similar machine",
          "D": "Celluloid"
        }
      },
      {
        "id": 8,
        "type": "single",
        "correct": ["A"],
        "choices": {
          "A": "Small in size",
          "B": "Inexpensive to create",
          "C": "Unfocused",
          "D": "Limited in subject matter"
        }
      },
      {
        "id": 9,
        "type": "single",
        "correct": ["D"],
        "choices": {
          "A": "Choice A",
          "B": "Choice B",
          "C": "Choice C",
          "D": "Choice D"
        }
      },
      {
        "id": 10,
        "type": "multi",
        "points": 2,
        "correct": ["C", "E", "F"],
        "choices": {
          "A": "Kinetoscope parlors were modeled on phonograph parlors",
          "B": "The Kinetoscope inspired large-screen projection",
          "C": "Early cinema allowed private viewing",
          "D": "Slide-and-lantern shows drew large audiences",
          "E": "Projection technology enabled large-screen images",
          "F": "Cinema became mass entertainment once projection was possible"
        }
      }
    ]
  },

  {
    "part": "Part 2",
    "questions": [
      {
        "id": 1,
        "type": "single",
        "correct": ["C"],
        "choices": {
          "A": "Not all individuals find food successfully",
          "B": "Individuals defend their young",
          "C": "More individuals are born than can survive",
          "D": "Certain genes increase adulthood survival"
        }
      },
      {
        "id": 2,
        "type": "single",
        "correct": ["C"],
        "choices": {
          "A": "Identify",
          "B": "Modify",
          "C": "Satisfy",
          "D": "Simplify"
        }
      },
      {
        "id": 3,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "Future explosions",
          "B": "Pent-up aggressive impulses",
          "C": "Outlets",
          "D": "Indirect ways"
        }
      },
      {
        "id": 4,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "Frustration over unmet desires",
          "B": "Fear of punishment and loss of love",
          "C": "Desire to care for parents",
          "D": "Desire to attack other family members"
        }
      },
      {
        "id": 5,
        "type": "single",
        "correct": ["C"],
        "choices": {
          "A": "Deliberately build aggression",
          "B": "Usually explode aggressively",
          "C": "Must vent aggression to prevent buildup",
          "D": "Lose aggression if not expressed"
        }
      },
      {
        "id": 6,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "Just wars always lead to aggression",
          "B": "Beliefs about justified aggression affect behavior",
          "C": "Peaceful people become aggressive in war",
          "D": "Justified aggression does not cause aggression"
        }
      },
      {
        "id": 7,
        "type": "single",
        "correct": ["C"],
        "choices": {
          "A": "Moral values",
          "B": "Past experiences",
          "C": "Instinct to avoid aggression",
          "D": "Beliefs about others’ intentions"
        }
      },
      {
        "id": 8,
        "type": "single",
        "correct": ["B"],
        "choices": {
          "A": "Choice A",
          "B": "Choice B",
          "C": "Choice C",
          "D": "Choice D"
        }
      },
      {
        "id": 9,
        "type": "multi",
        "points": 3,
        "correct": ["A", "B", "C", "E", "F"],
        "choices": {
          "A": "Aggression may be expressed indirectly",
          "B": "Aggressiveness aids survival",
          "C": "Aggression may result from misinterpreting intentions",
          "D": "Aggression declines with age",
          "E": "Aggression is influenced by values and beliefs",
          "F": "Repressed aggression can result in later aggression"
        }
      }
    ]
  }
];


/* ==========================
   RENDER
   ========================== */

const quizEl = document.getElementById("quiz");

quizData.forEach(part => {
  const h = document.createElement("h3");
  h.textContent = part.part;
  quizEl.appendChild(h);

  part.questions.forEach(q => {
    const div = document.createElement("div");
    div.className = "question";

    div.innerHTML = `<div class="question-title">Question ${q.id}</div>`;

    Object.entries(q.choices).forEach(([key, text]) => {
      const type = q.type === "multi" ? "checkbox" : "radio";
      const name = `${part.part}-${q.id}`;

      div.innerHTML += `
        <label>
          <input type="${type}" name="${name}" value="${key}">
          ${key}. ${text}
        </label>`;
    });

    quizEl.appendChild(div);
  });
});

/* ==========================
   SCORING
   ========================== */

function checkScore() {
  let score = 0;

  quizData.forEach(part => {
    part.questions.forEach(q => {
      const name = `${part.part}-${q.id}`;
      const inputs = document.querySelectorAll(`input[name="${name}"]`);
      const selected = [...inputs].filter(i => i.checked).map(i => i.value).sort();
      const correct = q.correct.slice().sort();

      const isCorrect =
        JSON.stringify(selected) === JSON.stringify(correct);

      if (isCorrect) {
        score += q.type === "multi" ? q.points : 1;
      }

      // Highlight answers
      inputs.forEach(input => {
        const label = input.parentElement;
        label.classList.remove("correct", "incorrect");

        if (q.correct.includes(input.value)) {
          label.classList.add("correct");
        } else if (input.checked) {
          label.classList.add("incorrect");
        }
      });

      // Disable question after grading
      inputs.forEach(input => input.disabled = true);
      inputs[0].closest(".question").classList.add("disabled");
    });
  });

  document.getElementById("score").innerHTML = `
    Your score: <strong>${score} points</strong><br><br>
    <button onclick="goToListening()">Go to Listening Section</button>
  `;
}


function goToListening() {
  window.location.href = "https://daltera.github.io/quiz4.html";
}

</script>

</body>
</html>
